# 30-day Rolling Retention Project

This project handles simulated game performance data to guess the 30-day retention date of its player pool over a lifecycle of 365 days. The analysis was performed by a team of two consisting of fellow analyst [Jon-Jon Rico Noll](https://github.com/riconoll/ProjectOne) and myself.

Follow-up questions to address are the average expenditure of those retained compared to non-retained players and the regional distribution of the player pool.

The relational database features 4 tables, containing information on the players, match results, and item purchases. 

To fetch all the relevant data to calculate the differential between the last day in which a player engaged in a match and the day in which they joined the game, BigQuery was used . In light of the information contained in each of the four tables and the player-to-match-to-joining-date-to-item-purchased relationship, the approach, led by Jon-Jon's initiative, was to generate [one single table](https://github.com/MiguelPMiralles/Portfolio/blob/main/Assessing%20Rolling%20Retention/PlayerID%20information%20and%20retention%20status.sql) that would return unique information on the players (their player id, the last day in which they played a game, the day in which they joined, the region from where they downloaded the game (Africa, Asia, Europe, North America, Oceania, and South America), how much they have spent, and the days elapsed between the joining date and the last game played, which provides the retention status. Additionally, a table labeling the retention status is featured. [An additional query](https://github.com/MiguelPMiralles/Portfolio/blob/main/Assessing%20Rolling%20Retention/Query%20containing%20fractional%20retention.sql) has been written to account for the fractional retention rate, which is built upon the base query mentioned above. Both are assests featured in this repository.

All four tables were joined at the intersection of player and item IDs. Once this initial query was built, it was needed to know how many games each player had played. The initial query was sub-queried into one asking for the count of games, using the player pool as a filter, thus returning a breakdown of the games per player. This query in turn became the subquery of a higher level one, calling for the last day played among the total of games per player that was previously obtained. With all this rough data prepared, the only variable left to calculate was the actual retention rate, the outermost query, and the one including the calculation of the difference between the last game played and the joining date.

The query rendered a table with rows accounting for each one of the members in the players' pool. The average fractional retention rate is 62.57%, whereas the retention rate for the player pool as a whole is 62.79%. There is no retention data for players between days 334-365, that's a subset of players who joined and played during December. This offset certainly skews the data, as these outliers are left out because of the use of a 30-day metric. Trendlines differ depending on whether the last 31 days are counted or not. If the whole year is taken into account, a drop-off in player retention happens from day 334 onwards. However, the line is more stable if the outliers are removed. The behavior of the December player pool and those joining at the beginning of the next year is to be monitored. 

!['description'](https://github.com/MiguelPMiralles/Portfolio/blob/main/Assessing%20Rolling%20Retention/Retention%20Rates%20over%20Time.png)
!['description'](https://github.com/MiguelPMiralles/Portfolio/blob/main/Assessing%20Rolling%20Retention/Retention%20Status%20NR%20and%20R.png)

Visualizations and tables were created in [Google Sheets](https://github.com/MiguelPMiralles/Portfolio/blob/main/Assessing%20Rolling%20Retention/Game%20Retention%20Data.xlsx) to analyze whether retained players spend more than non-retained players at different levels. In light of these figures, non-retained players seem to spend more on average. However, retained players have spent more in total. Why is that? Are there players close to gaining retained status spending more, thus skewing the figures? One thing to consider is that players that joined in December cannot gain retained status, as the metric takes 30 as the threshold. Fewer data points and less count also have an effect in tipping the averages in favor of the non-retained. There might be different reasons as to why this happens. Players can buy their way out of a high rank but maybe the game is not challenging enough, causing the drop-off in engagement. To monitor is the conversion rate of those around the 30-day mark. A table checking the average expenditure across the distribution of days elapsed between the joining date and the last game played might support the idea that while retained players might not spend more (barring outliers), players close to retention (not those one standard distribution away, though) are almost indistinguishable for these purposes. 

Longer-tenured players tend to spend less than newer players, the trend shows a decline in expenditure as retention increases. On average, it takes players around 34,5 days to play a game for the last time, and the actual average for players who last played a game 35 days after joining is pretty close to the mean (1404.110467 v 1400.802575), but above the average amount for retained players (1252.71). Players who return a considerable long time after joining, while retained, might have invested at the beginning, prefer to play more and get better at it with moderate investment, or chose not to invest in the game. Gearing up at the beginning seems to impact both retention and expenditure. It might explain why it decreases as retention goes up, as players don't need to level up to play competitively, and they can return any time knowing they can engage in high-level matches or feel they have played enough and nothing more is there in terms of a challenge. 

The standard deviation and the coefficient of variation for the days between joining the player pool and the last match player might indicate that the player pool is not too compact (SD sitting at around 20.35 and the variation coefficient close to 60%, but if the outliers are taken out, the inter-quartile range is 34.5, which means that half of the last games played happened within 17 and 52 days of joining the pool of players). However, the money spent is not so spread out throughout this sample (SD of around 485CAD and a variation coefficient of 35%), and it might lead to think that spending tends to be heterogeneous as well, but slightly more uniform. Also, given that there seems to be a close relationship between the money spent on average and the distance between the last game played and the joining date, further analysis should be put in place to find out whether other variables might be interceding and/or how to revert this trend, as it seems the game is not set up for retention and consistent, long-term, repeated expenditure. Having said that, there might a relationship between the number of games played, the average expenditure, and the retention status. Retained players play at least 8 games, and they might play as many as 43 times, which might lend itself to thinking that the spending decreases because they get familiar with the game and its particular dynamics. Non-retained players play as many as 25 games. Those inexperienced spend more, while those who are seasoned players seem to spend less, although at day 25 there is a spike in overall spending, probably due to a small subset of players playing that many times and spending plenty. More observation of the trends is needed, as some of these currently non-retained players can turn into retained players, especially those who joined recently. 

!['description'](https://github.com/MiguelPMiralles/SQL_Project/blob/main/total%20spending.png)
!['description'](https://github.com/MiguelPMiralles/SQL_Project/blob/main/AVG%20spending.png)
!['description'](https://github.com/MiguelPMiralles/SQL_Project/blob/main/Spending%20evolution.png)
!['description'](https://github.com/MiguelPMiralles/SQL_Project/blob/main/Games%20played%20and%20average%20spending.png)

The data has also allowed addressing explorations of the expenditure per region and the systems preferred by the players, retained or not. The two leading regions per number of players are North and South America, but it is in Europe where retained players spend the most in total, although if we look at average spending, Asia becomes the leading region. As for non-retained, it is North America where non-retained players spend the most, but it is Oceania where non-retained players spend the most on average.

There does not seem to be a preferred operative system, at least in absolute terms.

!['description'](https://github.com/MiguelPMiralles/SQL_Project/blob/main/OS%20distribution.png)
